<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HodoGuides</title>

<link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet" />
<script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>

<style>
  :root{
    --nav-h: 68px;      /* bottom nav height */
    --cards-h: 150px;   /* cards rail height */
    --globe-lift: -8vh; /* ⇦ ajuste pour monter/descendre la planète */
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
    color:#fff; background:#111; overflow:hidden;
  }

  header{
    position:absolute; inset:20px auto auto 20px; z-index:10;
    font-weight:800; font-size:28px; letter-spacing:.3px;
    text-shadow:0 2px 10px rgba(0,0,0,.35);
  }

  .search-bar{
    position:absolute; left:50%; top:74px; transform:translateX(-50%);
    width:min(820px,86%); z-index:10;
  }
  .search-bar input{
    width:100%; padding:14px 18px; font-size:16px; color:#fff;
    background:rgba(255,255,255,.14); border:0; border-radius:28px;
    outline:none; backdrop-filter: blur(6px);
  }

  #map{
    position:absolute; inset:0;
    padding-bottom: calc(var(--cards-h) + var(--nav-h) + env(safe-area-inset-bottom, 0px));
  }

  #map .mapboxgl-canvas{
    transform: translateY(var(--globe-lift));
    transform-origin: center;
  }

  /* Guides rail */
  .guides{
    position:absolute; left:0; right:0;
    bottom: calc(var(--nav-h) + 8px + env(safe-area-inset-bottom, 0px));
    height: var(--cards-h);
    padding: 10px 12px;
    display:flex; gap:12px; overflow-x:auto;
    z-index:20;
    scrollbar-width:none;
  }
  .guides::-webkit-scrollbar{display:none}

  .guide-card{
    flex:0 0 220px; background:#1c1c1e; border-radius:14px; overflow:hidden;
    box-shadow:0 8px 24px rgba(0,0,0,.35);
  }
  .guide-card img{width:100%; height:110px; object-fit:cover}
  .guide-card p{margin:8px 10px 10px; font-size:14px; color:#ddd}

  /* Bottom navigation */
  .nav{
    position:absolute; left:0; right:0; bottom:0;
    height: calc(var(--nav-h) + env(safe-area-inset-bottom, 0px));
    padding: 8px 18px calc(10px + env(safe-area-inset-bottom, 0px));
    background: rgba(20,20,22,.92);
    backdrop-filter: blur(6px);
    border-top:1px solid rgba(255,255,255,.08);
    display:flex; align-items:flex-end; justify-content:space-between;
    z-index:25;
  }

  .tab{
    appearance:none; background:none; border:0; padding:0;
    display:flex; flex-direction:column; align-items:center; gap:6px;
    color:#cfcfd3; font-size:12px; min-width:88px; cursor:pointer;
  }

  .tab .chip{
    width:44px; height:44px; border-radius:50%;
    display:grid; place-items:center;
    background:#1d1e21; color:#cfcfd3;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
    transition: transform .12s ease, background .2s ease, color .2s ease;
  }

  .tab.active .chip{
    background:#6f63ff;   /* violet actif */
    color:white;
    box-shadow:0 6px 16px rgba(111,99,255,.35);
  }

  .tab .label{opacity:.9}
  .tab.active .label{color:#fff; opacity:1}

  .tab:active .chip{ transform: scale(.96); }
</style>
</head>
<body>

  <header>HodoGuides</header>

  <div class="search-bar">
    <input type="text" placeholder="Search a guide..." />
  </div>

  <div id="map"></div>

  <!-- Guides rail -->
  <div class="guides">
    <div class="guide-card">
      <img src="https://source.unsplash.com/400x200/?okinawa,beach" alt="Okinawa" />
      <p>Okinawa – Islands & Hidden Spots</p>
    </div>
    <div class="guide-card">
      <img src="https://source.unsplash.com/400x200/?tokyo,city" alt="Tokyo" />
      <p>Tokyo – City Highlights</p>
    </div>
    <div class="guide-card">
      <img src="https://source.unsplash.com/400x200/?kyoto,temple" alt="Kyoto" />
      <p>Kyoto – Temples & Gardens</p>
    </div>
  </div>

  <!-- Bottom navigation -->
  <nav class="nav">
    <button class="tab active" data-tab="explore">
      <span class="chip">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2zm3.7 6.3-2 5.4a1 1 0 0 1-.6.6l-5.4 2 2-5.4a1 1 0 0 1 .6-.6l5.4-2zM11 11l-1 3 3-1 1-3-3 1z"/>
        </svg>
      </span>
      <span class="label">Explore</span>
    </button>

    <button class="tab" data-tab="guides">
      <span class="chip">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M4 5a3 3 0 0 1 3-3h11v18H7a3 3 0 0 0-3 3V5zm3-1a1 1 0 0 0-1 1v12a4 4 0 0 1 3-1h9V4H7z"/>
        </svg>
      </span>
      <span class="label">My Guides</span>
    </button>

    <button class="tab" data-tab="favorites">
      <span class="chip">
        <svg viewBox="0 0 24 24" width="20" height="20">
          <path fill="currentColor" d="M12 21s-7-4.35-9.33-8.1C.55 9.73 2.07 6 5.6 6c2.02 0 3.1 1.08 4.4 2.5C11.9 7.08 12.98 6 15 6c3.53 0 5.05 3.73 2.93 6.9C19 16.65 12 21 12 21z"/>
        </svg>
      </span>
      <span class="label">Favorites</span>
    </button>
  </nav>

<script>
  mapboxgl.accessToken = "pk.eyJ1IjoiZXJpa2FyYW1lbGwiLCJhIjoiY21jbmlteXJuMDBjaDJrc2swbnA0a29wZSJ9.F8aX2alF-PpnqInkyqba8g";

  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/erikaramell/cmcnjverq008y01qw6rir46gy",
    projection: "globe",
    center: [10, 20],
    zoom: 0.3
  });

  map.on("style.load", () => {
    map.setFog({});
  });

  document.querySelectorAll('.nav .tab').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.nav .tab').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
    });
  });
</script>
</body>
</html>