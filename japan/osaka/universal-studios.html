<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Universal Studios Japan · Osaka · HodoGuides</title>

  <!-- Favicon (remonte 3 dossiers) -->
  <link rel="icon" href="../../../images/favicon.png" type="image/png" />

  <!-- Mapbox + Icons -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{ --panel-h: 230px; --accent:#8f88ff; }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter;
      color:#fff; background:#0e1420; overflow:hidden;
      background-image:
        radial-gradient(ellipse at 50% 40%, #1d2845 0%, #0e1420 60%, #0b0f18 100%),
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.18) 0, rgba(255,255,255,0) 100%),
        radial-gradient(2px 2px at 70% 60%, rgba(255,255,255,.14) 0, rgba(255,255,255,0) 100%),
        radial-gradient(1.5px 1.5px at 40% 80%, rgba(255,255,255,.10) 0, rgba(255,255,255,0) 100%);
      background-repeat:no-repeat;
    }

    /* Top bar / fil d’ariane */
    .topbar{
      position:absolute; left:12px; right:12px; top:12px; z-index:20;
      display:flex; align-items:center; gap:10px;
    }
    .back{
      display:flex; align-items:center; gap:10px;
      background:rgba(255,255,255,.14); padding:10px 14px; border-radius:14px;
      text-decoration:none; color:#fff; backdrop-filter: blur(6px);
    }
    .crumbs{
      display:flex; gap:8px; align-items:center; opacity:.95; font-weight:700;
      text-shadow:0 1px 8px rgba(0,0,0,.3);
    }
    .crumbs a{ color:#fff; text-decoration:none; opacity:.85 }
    .crumbs .sep{ opacity:.5 }

    /* Map */
    #map{
      position:absolute; inset:0;
      padding-bottom: calc(var(--panel-h) + 12px);
    }

    /* Marker photo */
    .photo-marker{
      width:46px; height:46px; border-radius:50%; overflow:hidden;
      border:3px solid #fff; box-shadow:0 0 10px rgba(0,0,0,.55); background:#999; cursor:pointer;
    }
    .photo-marker img{ width:100%; height:100%; object-fit:cover; display:block }

    /* Info panel */
    .panel{
      position:absolute; left:0; right:0; bottom:10px; z-index:25;
      display:grid; place-items:center; pointer-events:none;
    }
    .card{
      width:min(960px, calc(100% - 20px));
      background:rgba(12,14,24,.92); border:1px solid rgba(255,255,255,.08);
      border-radius:18px; box-shadow:0 10px 28px rgba(0,0,0,.45);
      overflow:hidden; display:grid; grid-template-columns: 160px 1fr;
      min-height:var(--panel-h); pointer-events:auto;
    }
    @media (max-width:720px){
      .card{ grid-template-columns: 1fr; }
    }
    .cover{
      position:relative; background:#111; min-height:180px;
    }
    .cover img{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }
    .shade{ position:absolute; inset:auto 0 0 0; height:55%;
      background:linear-gradient(180deg, transparent 0%, rgba(0,0,0,.65) 60%, rgba(0,0,0,.9) 100%);
    }
    .content{ padding:16px 18px 14px 18px; display:flex; flex-direction:column; gap:10px }
    .title{ font-size:20px; font-weight:900; line-height:1.2 }
    .meta{ display:flex; gap:14px; flex-wrap:wrap; font-size:13px; opacity:.85 }
    .meta .chip{
      background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.12);
      padding:6px 10px; border-radius:999px; display:inline-flex; align-items:center; gap:8px;
    }
    .actions{ margin-top:auto; display:flex; flex-wrap:wrap; gap:10px }
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      padding:10px 14px; border-radius:10px; text-decoration:none; font-weight:700;
      border:1px solid rgba(255,255,255,.14); color:#fff; background:#161a28;
    }
    .btn.primary{ background:var(--accent); border-color:transparent; color:#0c0f1b }
    .btn i{ opacity:.9 }
  </style>
</head>
<body>

  <!-- Topbar -->
  <div class="topbar">
    <a class="back" href="../index.html"><i class="fa-solid fa-chevron-left"></i><span>Back to Osaka</span></a>
    <div class="crumbs">
      <a href="../../../index.html">Explore</a><span class="sep">›</span>
      <a href="../index.html">Osaka</a><span class="sep">›</span>
      <span>Universal Studios Japan</span>
    </div>
  </div>

  <!-- Map -->
  <div id="map"></div>

  <!-- Bottom info sheet -->
  <div class="panel">
    <div class="card">
      <div class="cover">
        <img id="hero" src="../../../images/universal-studios.jpg" alt="Universal Studios Japan"
             onerror="this.src='https://images.unsplash.com/photo-1514525253161-7a46d19cd819?q=80&w=1600&auto=format&fit=crop';">
        <div class="shade"></div>
      </div>
      <div class="content">
        <div class="title">Universal Studios Japan</div>
        <div class="meta">
          <span class="chip"><i class="fa-solid fa-ticket"></i> Theme Park</span>
          <span class="chip"><i class="fa-solid fa-location-dot"></i> Konohana Ward, Osaka</span>
          <span class="chip"><i class="fa-solid fa-clock"></i> 1 full day</span>
        </div>

        <div style="font-size:14px; opacity:.95">
          Parc à thème populaire avec zones <em>Super Nintendo World</em>, <em>Wizarding World of Harry Potter</em>, attractions saisonnières et parades.
        </div>

        <div class="actions">
          <a class="btn primary" href="https://www.usj.co.jp/" target="_blank" rel="noopener">
            <i class="fa-solid fa-globe"></i> Official website
          </a>
          <a class="btn" href="https://maps.google.com/?q=Universal+Studios+Japan&ll=34.6654,135.4323&z=16" target="_blank" rel="noopener">
            <i class="fa-solid fa-map"></i> Open in Google Maps
          </a>
          <a class="btn" href="../index.html#osaka"><i class="fa-solid fa-city"></i> More in Osaka</a>
        </div>
      </div>
    </div>
  </div>

<script>
  // Mapbox
  mapboxgl.accessToken = "pk.eyJ1IjoiZXJpa2FyYW1lbGwiLCJhIjoiY21jbmlteXJuMDBjaDJrc2swbnA0a29wZSJ9.F8aX2alF-PpnqInkyqba8g";

  // Universal Studios Japan (approx)
  const USJ = { lng: 135.4323, lat: 34.6654 };

  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/erikaramell/cmcnjverq008y01qw6rir46gy",
    center: [USJ.lng, USJ.lat],
    zoom: 14.6,
    pitch: 45,
    bearing: -12
  });
  map.on("style.load", () => map.setFog({}));

  // Marker with photo
  const el = document.createElement('div');
  el.className = 'photo-marker';
  const im = document.createElement('img');
  im.src = "../../../images/universal-studios.jpg";
  im.onerror = () => { im.src = "https://images.unsplash.com/photo-1514525253161-7a46d19cd819?q=80&w=1200&auto=format&fit=crop"; };
  el.appendChild(im);

  const popupHTML = `
    <div style="color:#0d1220; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter">
      <div style="font-weight:800; margin-bottom:6px">Universal Studios Japan</div>
      <div style="font-size:13px; opacity:.9; margin-bottom:8px">Theme Park · Osaka</div>
      <a href="https://www.usj.co.jp/" target="_blank" rel="noopener"
         style="display:inline-block; padding:8px 10px; background:#0e1420; color:#fff; text-decoration:none; border-radius:8px">
         Visit website
      </a>
    </div>
  `;
  const popup = new mapboxgl.Popup({ offset: 18 }).setHTML(popupHTML);

  new mapboxgl.Marker(el, { anchor:'center' })
    .setLngLat([USJ.lng, USJ.lat])
    .setPopup(popup)
    .addTo(map);

  // Fit padding for bottom panel
  function applyPadding(){
    const h = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--panel-h')) || 230;
    map.setPadding({ top: 70, right: 10, left: 10, bottom: h + 24 });
    setTimeout(()=>map.resize(), 0);
  }
  map.on('load', applyPadding);
  window.addEventListener('resize', applyPadding);
</script>
</body>
</html>