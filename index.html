<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>HodoGuides</title>

<link href="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.css" rel="stylesheet" />
<script src="https://api.mapbox.com/mapbox-gl-js/v3.2.0/mapbox-gl.js"></script>

<!-- Font Awesome (icônes nav) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
  :root{
    --nav-h: 72px;
    --cards-h: 150px;
    --globe-lift: -8vh; /* ajuste pour monter/descendre la planète */
    --accent: #8f88ff;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
    color:#fff; background:#0e1420; overflow:hidden;
    background-image:
      radial-gradient(ellipse at 50% 40%, #1d2845 0%, #0e1420 60%, #0b0f18 100%),
      radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.18) 0, rgba(255,255,255,0) 100%),
      radial-gradient(2px 2px at 70% 60%, rgba(255,255,255,.14) 0, rgba(255,255,255,0) 100%),
      radial-gradient(1.5px 1.5px at 40% 80%, rgba(255,255,255,.10) 0, rgba(255,255,255,0) 100%);
    background-repeat:no-repeat;
  }

  header{
    position:absolute; inset:20px auto auto 20px; z-index:10;
    font-weight:800; font-size:28px; letter-spacing:.3px;
    text-shadow:0 2px 10px rgba(0,0,0,.35);
  }
  .search-bar{
    position:absolute; left:50%; top:74px; transform:translateX(-50%);
    width:min(820px,86%); z-index:10;
  }
  .search-bar input{
    width:100%; padding:14px 18px; font-size:16px; color:#fff;
    background:rgba(255,255,255,.14); border:0; border-radius:28px;
    outline:none; backdrop-filter: blur(6px);
  }

  #map{ position:absolute; inset:0;
    padding-bottom: calc(var(--cards-h) + var(--nav-h) + env(safe-area-inset-bottom, 0px));
  }
  /* Monte visuellement le globe */
  #map .mapboxgl-canvas{ transform: translateY(var(--globe-lift)); transform-origin:center; }

  /* Cartes guides */
  .guides{
    position:absolute; left:0; right:0;
    bottom: calc(var(--nav-h) + 8px + env(safe-area-inset-bottom, 0px));
    height: var(--cards-h);
    padding: 10px 12px;
    display:flex; gap:12px; overflow-x:auto;
    z-index:20; scrollbar-width:none;
  }
  .guides::-webkit-scrollbar{display:none}
  .guide-card{
    flex:0 0 220px; background:#151923; border-radius:14px; overflow:hidden;
    box-shadow:0 8px 24px rgba(0,0,0,.35);
  }
  .guide-card img{width:100%; height:110px; object-fit:cover}
  .guide-card p{margin:8px 10px 10px; font-size:14px; color:#ddd}

  /* Nav bas type app */
  .nav{
    position:absolute; left:0; right:0; bottom:0;
    height: calc(var(--nav-h) + env(safe-area-inset-bottom, 0px));
    padding:10px 10px calc(10px + env(safe-area-inset-bottom, 0px));
    background:rgba(15,15,20,.92); backdrop-filter: blur(6px);
    border-top:1px solid rgba(255,255,255,.06);
    display:flex; align-items:flex-end; justify-content:space-around;
    z-index:25;
  }
  .tab{
    display:flex; flex-direction:column; align-items:center; gap:6px;
    font-size:12px; color:#cfcfd3; text-decoration:none; min-width:80px;
  }
  .tab i{font-size:22px; opacity:.85}
  .tab.active{color:#fff}
  .tab.active i{color:var(--accent)}
  .underline{ height:4px; width:96px; border-radius:2px;
    background:linear-gradient(90deg, transparent 0 10%, var(--accent) 10% 90%, transparent 90% 100%);
    position:absolute; left:50%; transform:translateX(-50%); bottom:6px; opacity:.75;
  }

  /* Marker photo rond */
  .photo-marker{
    width:46px; height:46px; border-radius:50%; overflow:hidden;
    border:3px solid #fff; box-shadow:0 0 6px rgba(0,0,0,.4);
    cursor:pointer; background:#999;
  }
  .photo-marker img{width:100%; height:100%; object-fit:cover; display:block}
  .photo-marker:hover{transform:scale(1.04)}
</style>
</head>
<body>

  <header>HodoGuides</header>

  <div class="search-bar">
    <input type="text" placeholder="Search a guide..." />
  </div>

  <div id="map"></div>

  <!-- Guides rail -->
  <div class="guides">
    <div class="guide-card">
      <img src="https://images.unsplash.com/photo-1549692520-acc6669e2f0c?q=80&w=1200&auto=format&fit=crop" alt="Okinawa" />
      <p>Okinawa – Islands & Hidden Spots</p>
    </div>
    <div class="guide-card">
      <img src="https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?q=80&w=1200&auto=format&fit=crop" alt="Tokyo" />
      <p>Tokyo – City Highlights</p>
    </div>
    <div class="guide-card">
      <img src="https://images.unsplash.com/photo-1545569341-9eb8b30979d9?q=80&w=1200&auto=format&fit=crop" alt="Kyoto" />
      <p>Kyoto – Temples & Gardens</p>
    </div>
  </div>

  <!-- Bottom navigation -->
  <nav class="nav">
    <a class="tab active" href="#"><i class="fa-solid fa-compass"></i><span>Explore</span></a>
    <a class="tab" href="#"><i class="fa-solid fa-book-open"></i><span>My Guides</span></a>
    <a class="tab" href="#"><i class="fa-solid fa-heart"></i><span>Favorites</span></a>
    <div class="underline"></div>
  </nav>

<script>
  mapboxgl.accessToken = "pk.eyJ1IjoiZXJpa2FyYW1lbGwiLCJhIjoiY21jbmlteXJuMDBjaDJrc2swbnA0a29wZSJ9.F8aX2alF-PpnqInkyqba8g";

  const map = new mapboxgl.Map({
    container: "map",
    style: "mapbox://styles/erikaramell/cmcnjverq008y01qw6rir46gy",
    projection: "globe",
    center: [10, 20],
    zoom: 0.3
  });

  map.on("style.load", () => { map.setFog({}); });

  /* ---- Markers photo cliquables ---- */
  const guides = [
    {
      name: "Japan",
      coords: [139.6917, 35.6895],               // Tokyo
      img: "https://images.unsplash.com/photo-1526481280698-8fcc13fd91c0?q=80&w=200&auto=format&fit=crop",
      url: "https://erikaramell.github.io/japan-guide"
    },
    {
      name: "South Korea",
      coords: [126.9780, 37.5665],               // Seoul
      img: "https://images.unsplash.com/photo-1603808033115-67b3a2bfa4fd?q=80&w=200&auto=format&fit=crop",
      url: "https://erikaramell.github.io/korea-guide"
    }
  ];

  guides.forEach(g => {
    const el = document.createElement("div");
    el.className = "photo-marker";
    el.title = g.name;

    const img = document.createElement("img");
    img.src = g.img;
    img.alt = g.name;
    el.appendChild(img);

    el.addEventListener("click", () => {
      window.location.href = g.url; // remplace par tes pages
    });

    new mapboxgl.Marker(el).setLngLat(g.coords).addTo(map);
  });
</script>
</body>
</html>